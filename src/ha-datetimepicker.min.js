// HA-PopOver v1.1 © 2016 by Hossein Alipour http://hosseinalipour.ir
function HaDateTimePicker(e,t){this.solarDate=new HaSolarDate,this.target=e,t=t||{};var a=!!t.isSolar&&"true"===t.isSolar.toString().toLowerCase();this.options={date:t.date||new Date,isSolar:a,maxYear:t.maxYear||a===!0?1450:2050,minYear:t.minYear||a===!0?1350:1950,pagingDuration:t.pagingDuration||600,selectedDate:t.selectedDate||null,minAllowedDate:t.minAllowedDate||null,maxAllowedDate:t.maxAllowedDate||null,forceSetTime:!!t.forceSetTime&&"true"===t.forceSetTime.toString().toLowerCase(),resultInSolar:!!t.resultInSolar&&"true"===t.resultInSolar.toString().toLowerCase(),disableTime:!!t.disableTime&&"true"===t.disableTime.toString().toLowerCase(),resultFormat:t.resultFormat||"{month}/{day}/{year} {t?{hour}:{minute} {ampm}}"},this.options.isSolar===!0?(this.days=this.solarDate.dayNames,this.monthNames=this.solarDate.monthNames,this.renderedDate=this.solarDate.convertFromGregorian(this.options.date),null!=this.options.selectedDate&&(this.selectedDate=this.options.resultInSolar===!1?this.solarDate.convertFromGregorian(this.options.selectedDate):this.options.selectedDate)):(this.renderedDate=this.options.date,null!=this.options.selectedDate&&(this.selectedDate=this.options.resultInSolar===!1?this.options.selectedDate:this.solarDate.convertToGregorian(new HaSolarDate(this.options.selectedDate.getFullYear(),this.options.selectedDate.getMonth(),this.options.selectedDate.getDate()))),this.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]),this.options.maxAllowedDate&&(this.options.maxAllowedDate=this.options.isSolar?new HaSolarDate(this.options.maxAllowedDate):new Date(this.options.maxAllowedDate),this.options.maxYear=Math.min(this.options.maxYear,this.options.maxAllowedDate.getFullYear()),this.solarDate.compare(this.options.maxAllowedDate,this.renderedDate)>0&&(this.renderedDate=this.options.maxAllowedDate)),this.options.minAllowedDate&&(this.options.minAllowedDate=this.options.isSolar?new HaSolarDate(this.options.minAllowedDate):new Date(this.options.minAllowedDate),this.options.minYear=Math.max(this.options.minYear,this.options.minAllowedDate.getFullYear()),this.solarDate.compare(this.options.minAllowedDate,this.options.renderedDate)<0&&(this.renderedDate=this.options.minAllowedDate)),null!=this.selectedDate&&(this.selectedTime={hour:this.selectedDate.getHours()>=12?this.selectedDate.getHours()-12:this.selectedDate.getHours(),minute:this.selectedDate.getMinutes(),amOrPm:this.selectedDate.getHours()>=12?"pm":"am"}),this.options.disableTime===!0&&(this.options.forceSetTime=!1,this.selectedTime=null)}function caseInsensitiveGetAttribute(e,t){for(var a=0;a<e.attributes.length;a++){var i=e.attributes[a];if(t.toLowerCase()===i.name)return i.value}}function twoDigits(e){return e.toString().length<2&&(e="0"+e.toString()),e}function createFragment(e){var t=document.createDocumentFragment(),a=document.createElement("div");for(a.innerHTML=e;a.firstChild;)t.appendChild(a.firstChild);return t}function getMonthLastDay(e,t){new Date;e+1>11&&t++;var a=new Date(t,e+1,0).getDate();return a}HaDateTimePicker.prototype.init=function(){document.querySelectorAll(".ha-datetimepicker").length>0&&document.body.removeChild(document.querySelector(".ha-datetimepicker")),this.createCalendar(),this.setupStyles(),this.renderDate(this.selectedDate||this.renderedDate),this.renderClock(),null!=this.selectedTime&&(this.renderHourHand(),this.renderMinuteHand()),this.addEvents(),this.renderResult()},HaDateTimePicker.prototype.createCalendar=function(){for(var e=1==this.options.isSolar?this.renderedDate.getFullYear().toString().toFaDigit():this.renderedDate.getFullYear(),t="<div class='ha-datetimepicker'><div class='ha-dp-dim'></div><div class='ha-datetimepicker-container'><div class='ha-dp-header'><div class='ha-dp-year'><div class='ha-dp-year-dropdown-container'><button type='button' class='ha-dp-year-btn'>"+e+"</button><ul class='ha-dp-year-dropdown'>",a=this.options.minYear;a<=this.options.maxYear;a++){a%10==0&&(t+="<hr class='ha-dp-list-separator'/>");var i=1==this.options.isSolar?a.toString().toFaDigit():a;t+="<li class='ha-dp-year-item' data-year='"+a+"'>"+i+"</li>"}t+="</ul></div></div><div class='ha-dp-month'><button type='button' class='ha-dp-prev-btn'><</button><div class='ha-dp-month-dropdown-container'><button type='button' class='ha-dp-month-btn'>"+this.monthNames[this.renderedDate.getMonth()]+"</button><ul class='ha-dp-month-dropdown'>";for(var s=0;s<this.monthNames.length;s++)t+="<li class='ha-dp-month-item'>"+this.monthNames[s]+"</li>";t+="</ul></div><button type='button' class='ha-dp-next-btn'>></button></div></div>",t+="<div class='ha-dp-body'>",t+="<div>";for(var r=0;r<7;r++){var o=this.options.isSolar?this.days[r][0]:this.days[r];t+="<p class='ha-dp-cell ha-dp-cell-header'>"+o}t+="</div>",t+="<div class='ha-dp-days-container'></div>",t+="</div>",this.options.disableTime===!1&&(t+="<div class='ha-dp-clock'><div class='ha-dp-clock-header'><div class='ha-dp-ampm'><div type='button' class='ha-dp-clock-am-btn"+(this.selectedTime&&"am"==this.selectedTime.amOrPm.toLowerCase()||!this.selectedTime?" selected":"")+"'>AM</div><button type='button' class='ha-dp-clock-ampm-btn"+(this.selectedTime&&"pm"==this.selectedTime.amOrPm.toLowerCase()?" pm":" am")+"'>AMPM</button><div type='button' class='ha-dp-clock-pm-btn"+(this.selectedTime&&"pm"==this.selectedTime.amOrPm.toLowerCase()?" selected":"")+"'>PM</div></div></div><div class='ha-dp-clock-face'><div class='hours-clock-face'></div></div><p class='ha-dp-clock-res'></p><button type='button' class='ha-dp-btn ha-dp-clock-ok-btn'>OK</button></div>"),t+="<div class='ha-dp-footer'><p class='ha-dp-result'>-</p><div class='ha-dp-buttons'><button type='button' class='ha-dp-btn ha-dp-cancel-btn'>Cancel</button><button type='button' class='ha-dp-btn ha-dp-ok-btn'>OK</button>",this.options.disableTime===!1&&(t+="<button type='button' class='ha-dp-btn ha-dp-clock-btn'>Clock</button>"),t+="</div></div>",t+="</div></div>";var n=createFragment(t);document.body.insertBefore(n,document.body.childNodes[document.body.childNodes.length-1])},HaDateTimePicker.prototype.setupStyles=function(){var e=document.querySelector(".ha-dp-days-container");if(e.setAttribute("style","animation-duration:"+this.options.pagingDuration+"ms"),this.options.isSolar){var t=document.querySelector(".ha-dp-body");t.style.direction="rtl"}},HaDateTimePicker.prototype.renderDate=function(e){this.renderedDate=this.options.isSolar?new HaSolarDate(e):new Date(e),this.renderedDate.setDate(1);for(var t=[{daysOfWeek:[]}],a=document.querySelector(".ha-datetimepicker"),i=0;i<a.classList.length;i++)a.classList[i].indexOf("month")>=0&&a.classList.remove(a.classList[i]);a.className+=" month"+e.getMonth();var s,r;1==this.options.isSolar?(r=new HaSolarDate(e.getFullYear(),e.getMonth(),1),s=new HaSolarDate):(r=new Date(e.getFullYear(),e.getMonth(),1),s=new Date);for(var i=-r.getDay()+1,o=1;o<=6;o++){for(var n=new Array,l=1;l<=7;l++)n.push(i++);t.push({daysOfWeek:n})}var d=document.querySelector(".ha-dp-year-btn");d.innerHTML=this.options.isSolar===!0?e.getFullYear().toString().toFaDigit():e.getFullYear();for(var c=document.getElementsByClassName("ha-dp-year-item"),h=0;h<c.length;h++)c[h].classList.contains("selected")&&c[h].classList.remove("selected");var m=document.querySelector(".ha-dp-year-item[data-year='"+e.getFullYear()+"']");null!=m&&(m.className+=" selected");var u=document.querySelector(".ha-dp-month-btn");u.innerHTML=this.monthNames[e.getMonth()];for(var p=document.querySelector(".ha-dp-days-container"),g=this.options.isSolar===!1?getMonthLastDay(e.getMonth(),e.getFullYear()):this.solarDate.getMonthTotalDays(e.getMonth(),e.getFullYear()),D=this.options.isSolar===!1?getMonthLastDay(e.getMonth()-1,e.getFullYear()):this.solarDate.getMonthTotalDays(e.getMonth()-1,e.getFullYear()),v="",y=0;y<t.length;y++){for(var f="<div>",b=0;b<t[y].daysOfWeek.length;b++){var S=t[y].daysOfWeek[b];if(S<=g&&S>0){var k=null!=this.selectedDate&&this.selectedDate.getFullYear()==e.getFullYear()&&this.selectedDate.getMonth()==e.getMonth()&&this.selectedDate.getDate()==S?" ha-dp-cell-selected":"",w="";null!=this.options.minAllowedDate&&(w=this.solarDate.compare(new Date(e.getFullYear(),e.getMonth(),S),this.options.minAllowedDate)>0?" ha-dp-cell-muted":w),null!=this.options.maxAllowedDate&&(w=this.solarDate.compare(new Date(e.getFullYear(),e.getMonth(),S),this.options.maxAllowedDate)<0?" ha-dp-cell-muted":w);var T,A=s.getFullYear()==e.getFullYear()&&s.getMonth()==e.getMonth()&&s.getDate()==S?" ha-dp-cell-currentdate":"";T=this.options.isSolar?6==b?" ha-dp-cell-holiday":"":5==b?" ha-dp-cell-holiday":"";var H=1==this.options.isSolar?S.toString().toFaDigit():S;f+="<p class='ha-dp-cell"+T+A+k+w+"' data-date='"+S+"' data-disp='"+H+"'>"+H+"</p>"}else if(S<1){var H=1==this.options.isSolar?(D+S).toString().toFaDigit():D+S;f+="<p class='ha-dp-cell ha-dp-cell-muted' data-date='"+(D+S)+"'>"+H+"</p>"}else{var H=1==this.options.isSolar?(S-g).toString().toFaDigit():S-g;f+="<p class='ha-dp-cell ha-dp-cell-muted' data-date='"+(S-g)+"'>"+H+"</p>"}}f+="</div>",v+=f}p.innerHTML=v,this.addEvents()},HaDateTimePicker.prototype.changeDate=function(e){var t=document.querySelector(".ha-dp-days-container"),a=this.options.pagingDuration;t.className=t.className.replace("page-left","").replace("page-right","").trim(),this.solarDate.compare(e,this.renderedDate)==-1?t.className+=" page-left":t.className+=" page-right";var i=this;setTimeout(function(){i.options.isSolar?i.renderDate(new HaSolarDate(e.getFullYear(),e.getMonth(),e.getDate())):i.renderDate(new Date(e.getFullYear(),e.getMonth(),e.getDate()))},a/2),setTimeout(function(){t.className=t.className.replace("page-left","").replace("page-right","").trim()},a)},HaDateTimePicker.prototype.addEvents=function(){for(var e=(document.querySelector(".ha-dp-days-container"),new Date),t=this,a=document.querySelectorAll(".ha-dp-cell:not(.ha-dp-cell-muted):not(.ha-dp-cell-header)"),i=0;i<a.length;i++)a[i].onclick=function(){for(var e=0;e<a.length;e++)a[e].className=a[e].className.replace("ha-dp-cell-selected","").trim();this.className+=" ha-dp-cell-selected",t.options.isSolar?t.selectedDate=new HaSolarDate(t.renderedDate.getFullYear(),t.renderedDate.getMonth(),parseInt(this.getAttribute("data-date"))):t.selectedDate=new Date(t.renderedDate.getFullYear(),t.renderedDate.getMonth(),parseInt(this.getAttribute("data-date"))),t.renderResult()};var s=document.querySelector(".ha-dp-dim");s.onclick=function(){t.hide()};var r=document.querySelector(".ha-dp-next-btn"),o=document.querySelector(".ha-dp-prev-btn");r.onclick=function(){var a=t.renderedDate.getFullYear(),i=t.renderedDate.getMonth()+1;i>=12&&(a++,i=0),t.changeDate(new Date(a,i,e.getDate()))},o.onclick=function(){var a=t.renderedDate.getFullYear(),i=t.renderedDate.getMonth()-1;i<0&&(a--,i=11),t.options.isSolar?t.changeDate(new HaSolarDate(a,i,e.getDate())):t.changeDate(new Date(a,i,e.getDate()))};var n=document.querySelector(".ha-dp-month-btn"),l=document.querySelector(".ha-dp-year-btn"),d=document.querySelector(".ha-dp-month-dropdown"),c=document.querySelector(".ha-dp-year-dropdown");document.querySelector("body").addEventListener("click",function(){d.className.indexOf("show")>-1&&(d.className=d.className.replace("show","").trim()),c.className.indexOf("show")>-1&&(c.className=c.className.replace("show","").trim())}),n.onclick=function(e){e.stopPropagation(),c.className.indexOf("show")>-1&&(c.className=c.className.replace("show","").trim()),d.className.indexOf("show")>-1?d.className=d.className.replace("show","").trim():d.className+=" show"},l.onclick=function(e){e.stopPropagation(),d.className.indexOf("show")>-1&&(d.className=d.className.replace("show","").trim()),c.className.indexOf("show")>-1?c.className=c.className.replace("show","").trim():c.className+=" show";var t=document.querySelector(".ha-dp-year-item.selected");if(null!=t){var a=Math.max(t.getAttribute("data-year")-5,document.querySelector(".ha-dp-year-item").getAttribute("data-year"));t=document.querySelector(".ha-dp-year-item[data-year='"+a+"']"),t.scrollIntoView()}};for(var h=document.querySelectorAll(".ha-dp-month-item"),m=0;m<h.length;m++)h[m].index=m,h[m].onclick=function(){if(this.index!=t.renderedDate.getMonth()){var a=this.index;t.changeDate(new Date(t.renderedDate.getFullYear(),a,e.getDate()))}};for(var u=document.querySelectorAll(".ha-dp-year-item"),p=0;p<u.length;p++)u[p].onclick=function(){var a=this.getAttribute("data-year");a!=t.renderedDate.getFullYear()&&t.changeDate(new Date(a,t.renderedDate.getMonth(),e.getDate()))};var g=document.querySelector(".ha-dp-ok-btn");g.onclick=function(){null!=t.returnResults()&&t.hide()};var D=document.querySelector(".ha-dp-cancel-btn");if(D.onclick=function(){t.hide()},this.options.disableTime===!1){var v=document.querySelector(".ha-dp-clock-btn");v.onclick=function(){t.toggleClock()};var y=document.querySelector(".ha-dp-clock-am-btn"),f=document.querySelector(".ha-dp-clock-pm-btn");y.onclick=function(){t.changeAmPm("am")},f.onclick=function(){t.changeAmPm("pm")};var b=document.querySelector(".ha-dp-clock-ampm-btn");b.onclick=function(){t.changeAmPm()};var S=document.querySelector(".ha-dp-clock-ok-btn");S.onclick=function(){t.toggleClock()};for(var k=document.querySelectorAll(".ha-dp-clock-num.ha-dp-hour-num .num"),w=0;w<k.length;w++)k[w].onclick=function(){var e=this.getAttribute("data-hour");t.selectedTime||(t.selectedTime={hour:0,minute:0,amOrPm:"AM"}),t.selectedTime.hour=e,t.renderHourHand(),t.renderMinuteHand()};for(var T=document.querySelectorAll(".ha-dp-clock-num.ha-dp-minute-num .num"),w=0;w<T.length;w++)T[w].onclick=function(){var e=this.getAttribute("data-minute");t.selectedTime||(t.selectedTime={hour:0,minute:0,amOrPm:"AM"}),t.selectedTime.minute=e,t.renderMinuteHand(),t.renderHourHand()}}},HaDateTimePicker.prototype.toggleClock=function(){if(this.options.disableTime!==!0){var e=document.querySelector(".ha-datetimepicker");this.clock?e.className=e.className.replace("clock","").trim():e.className+=" clock",this.clock=!this.clock,this.renderResult()}},HaDateTimePicker.prototype.renderResult=function(){var e=document.querySelector(".ha-dp-result"),t="";null!=this.selectedDate&&(t=this.options.isSolar?this.selectedDate.getDate()+"/"+(this.selectedDate.getMonth()+1)+"/"+this.selectedDate.getFullYear():this.selectedDate.getMonth()+1+"/"+this.selectedDate.getDate()+"/"+this.selectedDate.getFullYear()),null!=this.selectedTime&&(t+=" "+twoDigits(this.getHours())+":"+twoDigits(this.getMinutes())+" "+this.getAmOrPm().toUpperCase()),e.innerHTML=""==t?"-":0==this.options.isSolar?t:t.toFaDigit()},HaDateTimePicker.prototype.renderHourHand=function(){if(this.options.disableTime!==!0){for(var e=this.selectedTime.hour,t=document.querySelector(".hours-clock-face"),a=document.querySelector(".ha-dp-clock-hour-hand"),i=document.querySelectorAll(".ha-dp-clock-num.ha-dp-hour-num .num.selected"),s=0;s<i.length;s++)i[s].classList.remove("selected");document.querySelector(".ha-datetimepicker [data-hour='"+this.selectedTime.hour+"']").className+=" selected";var r;r=null!=a?a:document.createElement("div"),r.className="ha-dp-clock-hour-hand";var o=180+30*e+.5*this.selectedTime.minute;r.setAttribute("style","-webkit-transform: rotateZ("+o+"deg);-moz-transform: rotateZ("+o+"deg);transform: rotateZ("+o+"deg);"),null==a&&t.appendChild(r),this.renderClockResult()}},HaDateTimePicker.prototype.renderMinuteHand=function(){if(this.options.disableTime!==!0){for(var e=this.selectedTime.minute,t=document.querySelectorAll(".ha-dp-clock-num.ha-dp-minute-num .num.selected"),a=0;a<t.length;a++)t[a].classList.remove("selected");document.querySelector(".ha-datetimepicker [data-minute='"+this.selectedTime.minute+"']").className+=" selected";var i,s=document.querySelector(".ha-dp-clock-face"),r=document.querySelector(".ha-dp-clock-minute-hand");i=null!=r?r:document.createElement("div"),i.className="ha-dp-clock-minute-hand";var o=180+6*e;i.setAttribute("style","-webkit-transform: rotateZ("+o+"deg);-moz-transform: rotateZ("+o+"deg);transform: rotateZ("+o+"deg);"),null==r&&s.appendChild(i),this.renderClockResult()}},HaDateTimePicker.prototype.renderClockResult=function(){if(this.options.disableTime!==!0){var e=document.querySelector(".ha-dp-clock-res");e.innerHTML=twoDigits(this.getHours())+":"+twoDigits(this.getMinutes())+" "+this.getAmOrPm().toUpperCase()}},HaDateTimePicker.prototype.changeAmPm=function(e){if(this.options.disableTime!==!0&&null!=this.selectedTime){var t=document.querySelector(".ha-dp-clock-ampm-btn"),a=document.querySelector(".ha-dp-clock-am-btn"),i=document.querySelector(".ha-dp-clock-pm-btn");(null==e||"am"!=e.toLowerCase()&&"pm"!=e.toLowerCase())&&(e=null==this.selectedTime?"am":"am"===this.selectedTime.amOrPm.toLowerCase()?"pm":"am"),this.selectedTime.amOrPm=e,"am"==e.toLowerCase()?(i.classList.remove("selected"),a.classList.add("selected")):(a.classList.remove("selected"),i.classList.add("selected")),t.classList.remove("am"),t.classList.remove("pm"),t.classList.add(e),this.renderClockResult()}},HaDateTimePicker.prototype.getHours=function(){var e=this.selectedTime.hour;return"pm"==this.selectedTime.amOrPm.toLowerCase()&&0==e&&(e=12),e},HaDateTimePicker.prototype.getMinutes=function(){return this.selectedTime.minute},HaDateTimePicker.prototype.getAmOrPm=function(){return this.selectedTime.amOrPm},HaDateTimePicker.prototype.renderClock=function(){if(this.options.disableTime!==!0){for(var e=document.querySelector(".ha-dp-clock-face"),t=document.querySelector(".hours-clock-face"),a=0;a<12;a++){var i=document.createElement("div");i.className="ha-dp-clock-num ha-dp-hour-num";var s=document.createElement("span");s.setAttribute("data-hour",a),s.className="num",s.innerHTML=0==a?12:a,i.appendChild(s);var r=180+30*a;i.setAttribute("style","-webkit-transform: rotateZ("+r+"deg);-moz-transform: rotateZ("+r+"deg);transform: rotateZ("+r+"deg);"),s.setAttribute("style","-webkit-transform: rotateZ("+-r+"deg);-moz-transform: rotateZ("+-r+"deg);transform: rotateZ("+-r+"deg);"),t.appendChild(i)}for(var o=0;o<60;o++){var i=document.createElement("div");i.className="ha-dp-clock-num ha-dp-minute-num";var s=document.createElement("span");s.setAttribute("data-minute",o),s.className="num",s.innerHTML=o%5==0?0==o||5==o?"0"+o:o:"•",s.className+=o%5!=0?" dot":"",i.appendChild(s);var r=180+6*o;i.setAttribute("style","-webkit-transform: rotateZ("+r+"deg);-moz-transform: rotateZ("+r+"deg);transform: rotateZ("+r+"deg);"),s.setAttribute("style","-webkit-transform: rotateZ("+-r+"deg);-moz-transform: rotateZ("+-r+"deg);transform: rotateZ("+-r+"deg);"),e.appendChild(i)}}},HaDateTimePicker.prototype.returnResults=function(){if(null==this.selectedDate)return null;if(this.options.forceSetTime&&!this.selectedTime)return this.toggleClock(),null;for(var e=document.querySelectorAll(this.target),t=this.getFormatedResult(),a=0;a<e.length;a++){var i=e[a];"input"==i.tagName.toLowerCase()?i.value=t:i.innerHTML=t}return t},HaDateTimePicker.prototype.getResult=function(){var e=this.selectedDate;return!this.options.resultInSolar&&this.options.isSolar&&(e=this.solarDate.convertToGregorian(new HaSolarDate(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()))),!this.options.isSolar&&this.options.resultInSolar&&(e=this.solarDate.convertFromGregorian(new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()))),null!=this.selectedTime&&(e.setHours(this.getHours()),e.setMinutes(this.getMinutes())),e},HaDateTimePicker.prototype.getFormatedResult=function(){var e=this.getResult(),t=this.options.resultFormat;do{var a=t.indexOf("{t?"),i=t.indexOfClosingSymbol(a,"{","}"),s="";a>=0&&(s=t.substr(a,i-a+1),t=null==this.selectedTime?t.replace(s,""):t.removeCharsAt(i).removeCharsAt(a,3))}while(a>=0);do{var r=t.indexOf("{month}")<0&&t.indexOf("{year}")<0&&t.indexOf("{day}")<0;t=t.replace("{month}",e.getMonth()+1).replace("{day}",e.getDate()).replace("{year}",e.getFullYear())}while(!r);do{var o=t.indexOf("{minute}")<0&&t.indexOf("{hour}")<0&&t.indexOf("{ampm}")<0;t=null!=this.selectedTime?t.replace("{hour}",twoDigits(this.getHours())).replace("{minute}",twoDigits(this.getMinutes())).replace("{ampm}",this.getAmOrPm().toUpperCase()):t.replace("{hour}","").replace("{minute}","").replace("{ampm}","")}while(!o);return t.trim()},HaDateTimePicker.prototype.show=function(){this.init(),setTimeout(function(){document.querySelector(".ha-datetimepicker").className+=" show"},10)},HaDateTimePicker.prototype.hide=function(){var e=document.querySelector(".ha-datetimepicker");e.className=e.className.replace("show","").trim()},HaDateTimePicker.init=function(){for(var e=document.querySelectorAll("[data-ha-datetimepicker]"),t=0;t<e.length;t++)e[t].addEventListener("mousedown",function(){this.blur()}),e[t].addEventListener("keydown",function(e){return e.preventDefault(),!1}),e[t].addEventListener("click",function(e){this.blur();var t=new HaDateTimePicker(caseInsensitiveGetAttribute(this,"data-ha-datetimepicker"),{date:caseInsensitiveGetAttribute(this,"data-ha-dp-date"),selectedDate:this.value&&"NaN"!==Date.parse(this.value).toString()?new Date(this.value):this.innerHTML&&"NaN"!==Date.parse(this.innerHTML).toString()?new Date(this.innerHTML):caseInsensitiveGetAttribute(this,"data-ha-dp-selecteddate"),minAllowedDate:caseInsensitiveGetAttribute(this,"data-ha-dp-minalloweddate"),maxAllowedDate:caseInsensitiveGetAttribute(this,"data-ha-dp-maxalloweddate"),pagingDuration:caseInsensitiveGetAttribute(this,"data-ha-dp-pagingduration"),minYear:caseInsensitiveGetAttribute(this,"data-ha-dp-minyear"),maxYear:caseInsensitiveGetAttribute(this,"data-ha-dp-maxyear"),resultInSolar:caseInsensitiveGetAttribute(this,"data-ha-dp-resultinsolar"),isSolar:caseInsensitiveGetAttribute(this,"data-ha-dp-issolar"),forceSetTime:caseInsensitiveGetAttribute(this,"data-ha-dp-forcesettime"),disableTime:caseInsensitiveGetAttribute(this,"data-ha-dp-disabletime"),resultFormat:caseInsensitiveGetAttribute(this,"data-ha-dp-resultformat")});t.show()})},String.prototype.toFaDigit=function(){return this.replace(/\d+/g,function(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(e.charCodeAt(a)+1728);return t})},String.prototype.indexOfAfter=function(e,t){return preIndex=this.indexOf(e),preIndex+this.substring(preIndex).indexOf(t)},String.prototype.removeCharsAt=function(e,t){return t=t||1,this.slice(0,e)+this.slice(e+t)},String.prototype.indexOfClosingSymbol=function(e,t,a){t=t||"{",a=a||"}";for(var i=0,s=e;s<this.length;s++)if(this[s]==t&&i++,this[s]==a&&i--,i<=0)return s;return-1},HaDateTimePicker.init();